{"ast":null,"code":"var toText = function toText(term) {\n  var pre = term.pre || '';\n  var post = term.post || '';\n  return pre + term.text + post;\n};\n\nvar findStarts = function findStarts(doc, obj) {\n  var starts = {};\n  Object.keys(obj).forEach(function (reg) {\n    var m = doc.match(reg);\n    m.fullPointer.forEach(function (a) {\n      starts[a[3]] = {\n        fn: obj[reg],\n        end: a[2]\n      };\n    });\n  });\n  return starts;\n};\n\nvar wrap = function wrap(doc, obj) {\n  // index ids to highlight\n  var starts = findStarts(doc, obj);\n  var text = '';\n  doc.docs.forEach(function (terms, n) {\n    for (var i = 0; i < terms.length; i += 1) {\n      var t = terms[i]; // do a span tag\n\n      if (starts.hasOwnProperty(t.id)) {\n        var _starts$t$id = starts[t.id],\n            fn = _starts$t$id.fn,\n            end = _starts$t$id.end;\n        var m = doc.update([[n, i, end]]);\n        text += fn(m);\n        i = end - 1;\n        text += terms[i].post || '';\n      } else {\n        text += toText(t);\n      }\n    }\n  });\n  return text;\n};\n\nexport default wrap;","map":null,"metadata":{},"sourceType":"module"}