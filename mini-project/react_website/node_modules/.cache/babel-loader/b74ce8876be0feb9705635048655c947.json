{"ast":null,"code":"import press from './press.js';\nimport { unIndex } from '../_lib.js'; // remove shared data in key-val pairs\n// uses an ad-hoc run-length encoding format \n// {walk: walking}  -> {walk: '.4ing'}\n\nvar pressPairs = function pressPairs(pairs) {\n  pairs = pairs.map(function (a) {\n    return press(a[0], a[1]).join('|');\n  });\n  return pairs.join(',');\n};\n\nvar compress = function compress() {\n  var model = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  model = Object.assign({}, model); // compress fwd rules\n\n  model.rules = unIndex(model.rules);\n  model.rules = pressPairs(model.rules); // compress reverse rules\n\n  if (model.rev) {\n    model.rev = unIndex(model.rev);\n    model.rev = pressPairs(model.rev);\n  } // compress exceptions\n\n\n  model.exceptions = Object.entries(model.exceptions);\n  model.exceptions = pressPairs(model.exceptions);\n  return model;\n};\n\nexport default compress;","map":null,"metadata":{},"sourceType":"module"}