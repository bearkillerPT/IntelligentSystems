{"ast":null,"code":"import forms from './forms.js';\n\nvar cleanUp = function cleanUp(vb, res) {\n  vb = vb.clone(); // remove adverbs\n\n  if (res.adverbs.post && res.adverbs.post.found) {\n    vb.remove(res.adverbs.post);\n  }\n\n  if (res.adverbs.pre && res.adverbs.pre.found) {\n    vb.remove(res.adverbs.pre);\n  } // remove negatives\n\n\n  if (vb.has('#Negative')) {\n    vb = vb.remove('#Negative');\n  } // remove prefixes like 'anti'\n\n\n  if (vb.has('#Prefix')) {\n    vb = vb.remove('#Prefix');\n  } // cut-off phrasal-verb\n\n\n  if (res.root.has('#PhrasalVerb #Particle')) {\n    vb.remove('#Particle$');\n  } // did we miss any of these?\n  // vb = vb.remove('#Adverb')\n\n\n  vb = vb.not('#Adverb');\n  return vb;\n};\n\nvar getGrammar = function getGrammar(vb, res) {\n  var grammar = {}; // make it easy to classify, first\n\n  vb = cleanUp(vb, res);\n\n  for (var i = 0; i < forms.length; i += 1) {\n    var todo = forms[i];\n\n    if (vb.has(todo.match) === true) {\n      grammar.form = todo.name;\n      Object.assign(grammar, todo.data);\n      break; //only match one\n    }\n  } // did we find nothing?\n\n\n  if (!grammar.form) {\n    if (vb.has('^#Verb$')) {\n      grammar.form = 'infinitive';\n    }\n  } // fallback to 'naiive' tense detection\n\n\n  if (!grammar.tense) {\n    grammar.tense = res.root.has('#PastTense') ? 'PastTense' : 'PresentTense';\n  }\n\n  grammar.copula = res.root.has('#Copula');\n  return grammar;\n};\n\nexport default getGrammar;","map":null,"metadata":{},"sourceType":"module"}