{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/bearkiller/dev/IntelligentSystems/mini-project/react_website/src/ChatComponent.js\";\nimport React, { Component } from 'react';\nimport { Comment, Header } from 'semantic-ui-react';\nimport ChatHistory from './ChatHistory';\nimport ChatInput from './ChatInput';\nimport ClientAnalysis from './ComponentAnalysis';\nimport debounce from 'lodash.debounce';\nimport { animateScroll } from 'react-scroll';\n\nvar ChatComponent = /*#__PURE__*/function (_Component) {\n  _inherits(ChatComponent, _Component);\n\n  function ChatComponent(props) {\n    var _this;\n\n    _classCallCheck(this, ChatComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ChatComponent).call(this, props));\n\n    _this.handleInput = function (input) {\n      input = input.trim();\n      if (!input) return;\n\n      var messages = _this.state.messages.slice(0);\n\n      var client = _this.analyzer.analyze_question(_this.fixup(input));\n\n      messages.push({\n        user: true,\n        text: input,\n        date: new Date()\n      });\n\n      _this.setState({\n        messages: messages,\n        client: client\n      });\n\n      _this.debounced_reply(client.Answer);\n    };\n\n    _this.reply = function (reply) {\n      var messages = _this.state.messages.slice(0);\n\n      if (_this.state.messages.length === 0) return;\n      reply.forEach(function (element) {\n        messages.push({\n          user: false,\n          text: element,\n          date: new Date()\n        });\n      });\n\n      _this.setState({\n        messages: messages\n      });\n    };\n\n    _this.state = {\n      messages: [{\n        user: false,\n        text: _this.fixup(\"Hello, How Can I Help You?\"),\n        date: new Date()\n      }],\n      client: {}\n    };\n    _this.analyzer = new ClientAnalysis();\n    _this.debounced_reply = debounce(function (res) {\n      return _this.reply(res);\n    }, 1000, {\n      'maxWait': 5000\n    });\n    return _this;\n  }\n\n  _createClass(ChatComponent, [{\n    key: \"fixup\",\n    value: function fixup(text) {\n      // Hack fix for weird \"?\" spacing in elizabot\n      return text.replace(/ \\?/g, '?');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"chatApp\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        \"full-width\": \"full-width\",\n        \"padding-top\": \"0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }\n      }, JSON.stringify(this.state.client)), /*#__PURE__*/React.createElement(Header, {\n        className: \"chatHeader\",\n        as: \"h3\",\n        block: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 9\n        }\n      }, \"Chat with Morty!\"), /*#__PURE__*/React.createElement(Comment.Group, {\n        className: \"chatBody\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ChatHistory, {\n        messages: this.state.messages,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(ChatInput, {\n        inputHandler: this.handleInput,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return ChatComponent;\n}(Component);\n\nexport default ChatComponent;","map":{"version":3,"names":["React","Component","Comment","Header","ChatHistory","ChatInput","ClientAnalysis","debounce","animateScroll","ChatComponent","props","handleInput","input","trim","messages","state","slice","client","analyzer","analyze_question","fixup","push","user","text","date","Date","setState","debounced_reply","Answer","reply","length","forEach","element","res","replace","JSON","stringify"],"sources":["/home/bearkiller/dev/IntelligentSystems/mini-project/react_website/src/ChatComponent.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Comment, Header } from 'semantic-ui-react';\n\nimport ChatHistory from './ChatHistory'\nimport ChatInput from './ChatInput'\nimport ClientAnalysis from './ComponentAnalysis'\n\nimport debounce from 'lodash.debounce';\nimport { animateScroll } from 'react-scroll';\nclass ChatComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      messages: [{\n        user: false,\n        text: this.fixup(\"Hello, How Can I Help You?\"),\n        date: new Date(),\n      }],\n      client: {}\n    };\n    this.analyzer = new ClientAnalysis()\n\n    this.debounced_reply = debounce((res => this.reply(res)), 1000, { 'maxWait': 5000 });\n  }\n\n\n\n\n  handleInput = (input) => {\n    input = input.trim();\n\n\n    if (!input)\n      return;\n\n    var messages = this.state.messages.slice(0);\n    var client = this.analyzer.analyze_question(this.fixup(input))\n\n    messages.push({\n      user: true,\n      text: input,\n      date: new Date(),\n    });\n    this.setState({\n      messages,\n      client\n    });\n    this.debounced_reply(client.Answer);\n  }\n  reply = (reply) => {\n    const messages = this.state.messages.slice(0);\n    if (this.state.messages.length === 0)\n      return;\n    reply.forEach(element => {\n      messages.push({\n        user: false,\n        text: element,\n        date: new Date(),\n      });\n    })\n\n    this.setState({\n      messages,\n    });\n  }\n\n  fixup(text) {\n    // Hack fix for weird \"?\" spacing in elizabot\n    return text.replace(/ \\?/g, '?');\n  }\n\n  render() {\n    return (\n      <div className=\"chatApp\">\n\n        <div full-width='full-width' padding-top=\"0\">\n          {JSON.stringify(this.state.client)}\n        </div>\n        <Header className=\"chatHeader\" as='h3' block>\n          Chat with Morty!\n        </Header>\n        <Comment.Group className=\"chatBody\">\n          <ChatHistory messages={this.state.messages} />\n          <ChatInput inputHandler={this.handleInput} />\n        </Comment.Group>\n      </div>\n\n    );\n  }\n}\n\nexport default ChatComponent;"],"mappings":"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"},"metadata":{},"sourceType":"module"}