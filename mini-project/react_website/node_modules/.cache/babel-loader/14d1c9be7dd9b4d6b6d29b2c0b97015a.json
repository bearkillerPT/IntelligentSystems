{"ast":null,"code":"import matchTerm from '../term/doesMatch.js'; // 'foo? foo' matches are tricky.\n\nvar foundOptional = function foundOptional(state) {\n  var regs = state.regs;\n  var reg = regs[state.r];\n  var term = state.terms[state.t]; // does the next reg match it too?\n\n  var nextRegMatched = matchTerm(term, regs[state.r + 1], state.start_i + state.t, state.phrase_length);\n\n  if (reg.negative || nextRegMatched) {\n    // but does the next reg match the next term??\n    // only skip if it doesn't\n    var nextTerm = state.terms[state.t + 1];\n\n    if (!nextTerm || !matchTerm(nextTerm, regs[state.r + 1], state.start_i + state.t, state.phrase_length)) {\n      state.r += 1;\n    }\n  }\n};\n\nexport default foundOptional;","map":null,"metadata":{},"sourceType":"module"}