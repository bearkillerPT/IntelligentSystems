{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n// npm init -y\n//npm i compromise\nimport nlp from 'compromise';\nimport ConversationProvider from './AnswerProvider';\n\nvar ClientAnalysis = /*#__PURE__*/function () {\n  function ClientAnalysis() {\n    var _this = this;\n\n    _classCallCheck(this, ClientAnalysis);\n\n    this.analyze_question = function (input) {\n      var doc = nlp(input);\n      doc.contractions().expand();\n      doc.compute('root'); // Clear Answers\n\n      var changed = false;\n      var client = _this.state.client;\n      client['Answer'] = [];\n      client['!Action'] = [];\n      console.log(doc.out('tags'));\n\n      if (doc.has(\"~(hello|hi|howdy|hey)~ *\")) {\n        client['!Action'].push(\"GREETING\");\n        changed = true;\n      } //Goodbye\n\n\n      if (doc.has(\"(goodbye|bye|see you later|until next time|farewell)\")) {\n        client['!Action'].push(\"FAREWELL\");\n        changed = true;\n      }\n\n      if (doc.has(\"~(#Possessive|#Pronoun)~ * #Copula #Person\") || doc.has(\"#Pronoun #Person\")) {\n        client['ClientName'] = doc.match(\"#Person\").canBe(\"Person\").text();\n        client['Answer'].push(_this.cp.getQuestion('Greeting') + \" \" + client['ClientName']);\n        changed = true;\n      } //Question\n\n\n      if (doc.has(\"#QuestionWord\")) {\n        client['ToAnswer'] = true;\n\n        if (doc.has(\"~(mean)~\", null, {\n          fuzzy: 0.5\n        })) {\n          switch (client['LQ']) {\n            case \"FinalLocation\":\n              client['Answer'].push(_this.cp.getQuestion('ClarifyDestination'));\n              break;\n\n            case \"Action\":\n              client['Answer'].push(_this.cp.getQuestion('ClarifyAction'));\n              break;\n\n            case \"Date\":\n              client['Answer'].push(_this.cp.getQuestion('ClarifyDate'));\n              break;\n\n            case \"Type\":\n              client['Answer'].push(_this.cp.getQuestion('ClarifyType'));\n              break;\n\n            default:\n              client['!Action'].push(\"INTRODUCE\");\n              break;\n          }\n        } else if (doc.has(\"~(you)~\")) {\n          client['!Action'].push(\"INTRODUCE\");\n        } else {\n          client['!Action'].push(\"QUESTION\");\n        }\n\n        changed = true;\n      }\n\n      if (doc.has(\"~(start over|restart|reset)~\", null, {\n        fuzzy: 0.6\n      })) {\n        client['Answer'].push(_this.cp.getQuestion('Reset'));\n        _this.state = {\n          client: {\n            \"Destination\": -1,\n            \"Answer\": client[\"Answer\"],\n            \"ClientName\": client[\"ClientName\"],\n            \"!Action\": [],\n            \"ToAnswer\": false\n          }\n        };\n        changed = true;\n      } //Negative Answers\n\n\n      if ('LQ' in client && client['LQ'] !== undefined) {\n        console.log(client['LQ']);\n\n        switch (client['LQ']) {\n          case \"FinalLocation\":\n            if (doc.has(\"#City\")) {\n              client['LQ'] = undefined;\n              client[\"FinalLocation\"] = doc.match(\"#City\").canBe(\"Place\").text();\n              client['Destination'] = 1;\n            }\n\n            if (doc.has(\"#Negative\")) {\n              client['LQ'] = undefined;\n              client[\"FinalLocation\"] = undefined;\n              client['Destination'] = 0;\n            }\n\n            break;\n\n          case \"Date\":\n            if (doc.has(\"#Negative\")) {\n              client['LQ'] = undefined;\n              client[\"Date\"] = undefined;\n            }\n\n            break;\n\n          case \"Price\":\n            if (doc.has(\"#Negative\")) {\n              client['LQ'] = undefined;\n              client[\"Price\"] = undefined;\n            } else if (doc.has(\"#NumericValue\")) {\n              client[\"Price\"] = {\n                \"Value\": doc.match(\"#NumericValue\").canBe(\"NumericValue\").text(),\n                \"Filter\": \"-\"\n              };\n            }\n\n            break;\n\n          case \"Action\":\n            if (doc.has(\"#Negative\")) {\n              client['LQ'] = undefined;\n              client[\"Action\"] = undefined;\n            }\n\n            break;\n\n          case \"Type\":\n            if (doc.has(\"#Negative\")) {\n              client['LQ'] = undefined;\n              client[\"Type\"] = undefined;\n            }\n\n            break;\n\n          case \"ClientName\":\n            if (doc.has(\"#Negative\")) {\n              client['LQ'] = undefined;\n              client[\"ClientName\"] = undefined;\n            } else if (doc.has(\"#Person\")) {\n              client['ClientName'] = doc.match(\"#Person\").canBe(\"Person\").text();\n              client['LQ'] = undefined;\n            }\n\n            break;\n\n          default:\n            break;\n        }\n\n        if (client['LQ'] === undefined) {\n          client['Answer'].push(_this.cp.getQuestion('Confirmation'));\n          changed = true;\n        }\n      } //Questions Like:\n      // Do you have a destination\n      // 0-No, 1-Yes, -1- Not Answered\n      // What do You Wanna Do (STAY|FLIGHT|ATTRACTION)\n\n\n      if (doc.has(\"~(flights|fly|airplane|takeoff)~\", null, {\n        fuzzy: 0.6\n      })) {\n        client['Action'] = \"FLIGHT\";\n        if (client['LQ'] === \"Action\") client['LQ'] = undefined;\n        changed = true;\n      } else if (doc.has(\"~(stay|accomodation|hotel|room|motel)~\", null, {\n        fuzzy: 0.6\n      })) {\n        client['Action'] = \"STAY\";\n        if (client['LQ'] === \"Action\") client['LQ'] = undefined;\n        changed = true;\n      } else if (doc.has(\"~(attractions|events)~\", null, {\n        fuzzy: 0.6\n      })) {\n        client['Action'] = \"ATTRACTION\";\n        if (client['LQ'] === \"Action\") client['LQ'] = undefined;\n        changed = true;\n      }\n\n      if (doc.has(\"#Place\") && !doc.has(\"#City\")) {\n        client['Answer'].splice(0, 0, \"Help me out! If you have a destination give me the city\");\n      } //PLACES\n      //Field: FinalLocation || InitialLocation for flights\n\n\n      if (doc.has(\"(starting in|from) #City\")) {\n        var cityInit = doc.match(\"(starting in|from) #City\").canBe(\"Place\").text();\n        client['InitialLocation'] = cityInit;\n        if (client['LQ'] === \"InitialLocation\") client['LQ'] = undefined;\n        changed = true;\n      }\n\n      if (doc.has(\"(in|to|visit|know) #City\")) {\n        // STAY|ATTRACTION : Visiting City\n        var cities = doc.match(\"(in|to|visit) #City\").canBe(\"Place\").text().split(\" \");\n        client['FinalLocation'] = cities[0];\n        client[\"Destination\"] = 1;\n        if (client['LQ'] === \"FinalLocation\") client['LQ'] = undefined;\n        changed = true;\n      }\n\n      if (doc.has(\"#Negative * (destination|city)\") || doc.has(\"(somewhere|anywhere)\")) {\n        //No Destination / Go Somewhere\n        client[\"Destination\"] = 0;\n        if (client['LQ'] === \"FinalLocation\") client['LQ'] = undefined;\n        changed = true;\n      } //DATES\n\n\n      if (doc.has(\"#Date\")) {\n        var data = doc.match(\"#Date\").canBe(\"Date\").text();\n        changed = true;\n        client['Date'] = data;\n        if (client['LQ'] === \"Date\") client['LQ'] = undefined;\n      } //PRICE\n\n\n      if (doc.has(\"(under|below|up to|until|at most) #Money\")) {\n        client[\"Price\"] = {\n          \"Value\": doc.match(\"#Money\").canBe(\"Money\").text(),\n          \"Filter\": \"-\"\n        };\n        if (client['LQ'] === \"Price\") client['LQ'] = undefined;\n        changed = true;\n      } else if (doc.has(\"(above|at least) #Money\")) {\n        client[\"Price\"] = {\n          \"Value\": doc.match(\"#Money\").canBe(\"Money\").text(),\n          \"Filter\": \"+\"\n        };\n        if (client['LQ'] === \"Price\") client['LQ'] = undefined;\n        changed = true;\n      } else if (doc.has(\"(between) #NumericValue * #NumericValue\")) {\n        var values = doc.match(\"#Money\").canBe(\"Money\").text().split(\" \");\n        client[\"Price\"] = {\n          \"Filter\": \"+-\"\n        };\n\n        if (parseInt(values[0], 10) < parseInt(values[1], 10)) {\n          client['Price']['Min'] = values[0];\n          client['Price']['Max'] = values[1];\n        } else {\n          client['Price']['Min'] = values[1];\n          client['Price']['Max'] = values[0];\n        }\n\n        if (client['LQ'] === \"Price\") client['LQ'] = undefined;\n        changed = true;\n      } //Type\n\n\n      if (doc.has(\"~(fun|nature|city|historic)~\", null, {\n        fuzzy: 0.6\n      })) {\n        if (doc.has(\"~fun~\", null, {\n          fuzzy: 0.6\n        })) {\n          client['Type'] = \"Fun\";\n        } else if (doc.has(\"~City~\", null, {\n          fuzzy: 0.6\n        })) {\n          client['Type'] = \"City\";\n        } else if (doc.has(\"~nature~\", null, {\n          fuzzy: 0.6\n        })) {\n          client['Type'] = \"Nature\";\n        } else if (doc.has(\"~historic~\", null, {\n          fuzzy: 0.6\n        })) {\n          client['Type'] = \"Historical\";\n        }\n\n        if (client['LQ'] === \"Type\") client['LQ'] = undefined;\n        changed = true;\n      }\n\n      client[\"!Action\"].forEach(function (element) {\n        if (element === \"GREETING\") {\n          client['Answer'].push(_this.cp.getQuestion('Greeting'));\n        } else if (element === \"FAREWELL\") {\n          client['Answer'].push(_this.cp.getQuestion('Farewell'));\n        } else if (element === \"INTRODUCE\") {\n          client['Answer'].push(_this.cp.getQuestion('Introduction'));\n        }\n      });\n\n      if (!('ClientName' in client)) {\n        client['Answer'].push(_this.cp.getQuestion('ClientName'));\n        client['LQ'] = \"ClientName\";\n      } else if (!('FinalLocation' in client) && client['Destination'] === -1 || client['LQ'] === \"FinalLocation\") {\n        client['Answer'].push(_this.cp.getQuestion('FinalLocation'));\n        client['LQ'] = \"FinalLocation\";\n      } else if (!('Date' in client) && !(\"Season\" in client) || client['LQ'] === \"Date\") {\n        client['Answer'].push(\"When are you planning to go?\");\n        client['LQ'] = \"Date\";\n      } else if (!('Price' in client) || client['LQ'] === \"Price\") {\n        client['Answer'].push(\"Do you have any price range restrictions?\");\n        client['LQ'] = \"Price\";\n      } else if (!('Action' in client) || client['LQ'] === \"Action\") {\n        client['Answer'].push(\"What are you planning to do?\");\n        client['LQ'] = \"Action\";\n      } else if (client['Action'] === 'ATTRACTION' || client['LQ'] === \"Type\") {\n        client['Answer'].push(\"What kind of attraction are you looking for? Fun, Nature, historical or City?\");\n        client['LQ'] = \"Type\";\n      }\n\n      if (changed === false) {\n        client['Answer'].splice(0, 0, _this.cp.getQuestion('Unsupported'));\n      } //Order\n      // Add function to provide data based on filter\n\n\n      if (doc.has(\"~(show|find|see|give|tell)~\") || client.Answer.length === 0) {\n        client['ToAnswer'] = true;\n        var txt;\n\n        if (client['Action'] === \"FLIGHT\") {\n          if ('Date' in client && client['Date'] !== undefined && [\"summer\", \"winter\", \"autumn\", \"spring\", \"fall\"].includes(client['Date'])) {\n            client['Answer'].push(\"In what date are you planning to go (day of month)?\");\n            client['LQ'] = \"Date\";\n          } else {\n            txt = _this.handleProlog();\n          }\n        } else {\n          txt = _this.handleProlog();\n        }\n\n        client['Answer'].splice(0, 0, \"Don't worry, we're processing your request!\");\n        console.log(txt); // \n        //this.callProlog(txt);\n      }\n\n      return client;\n    };\n\n    this.dljs = this.cp = new ConversationProvider();\n    this.state = {\n      client: {\n        \"Destination\": -1,\n        \"Answer\": [],\n        \"!Action\": [],\n        \"ToAnswer\": false\n      }\n    };\n    nlp.extend({\n      // add new tags\n      tags: {\n        Season: {\n          isA: 'Date'\n        }\n      },\n      // add or change words in the lexicon\n      words: {\n        summer: 'Season',\n        winter: 'Season',\n        spring: 'Season',\n        autumn: 'Season',\n        fall: 'Season',\n        no: 'Negative',\n        nope: 'Negative',\n        city: ['City', \"AttType\"],\n        nature: ['Nature', 'AttType'],\n        historical: ['AttType', 'Historical'],\n        fun: ['AttType', 'Fun']\n      }\n    });\n  }\n\n  _createClass(ClientAnalysis, [{\n    key: \"callProlog\",\n    value: function callProlog(input) {\n      //attraction_type(X,Y)\n      input = input.trim();\n      if (!input) return;\n      fetch('http://localhost:3009/api?query=' + input).then( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(response) {\n          var data, error;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return response.json();\n\n                case 2:\n                  data = _context.sent;\n\n                  if (response.ok) {\n                    _context.next = 6;\n                    break;\n                  }\n\n                  // get error message from body or default to response statusText\n                  error = data && data.message || response.statusText;\n                  return _context.abrupt(\"return\", Promise.reject(error));\n\n                case 6:\n                  console.log(data); //attraction_type(A,B)\n\n                case 7:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }()).catch(function (error) {\n        console.error('There was an error!', error);\n      });\n    }\n  }, {\n    key: \"seasonDate\",\n    value: function seasonDate(date) {\n      var seasons = [\"summer\", \"winter\", \"autumn\", \"spring\"];\n      var winter_months = [\"january\", \"february\", \"march\"];\n      var spring_months = [\"april\", \"may\", \"june\"];\n      var summer_months = [\"july\", \"august\", \"september\"];\n      var autumn_months = [\"october\", \"november\", \"december\"];\n      var new_date = date.toLowerCase();\n      date = date.toLowerCase();\n\n      if (date.includes(\"fall\")) {\n        new_date = \"Autumn\";\n      }\n\n      if (seasons.includes(new_date.toLowerCase())) return new_date;\n      seasons.forEach(function (element) {\n        if (date.includes(element.toLowerCase())) {\n          new_date = element;\n          console.log(new_date);\n        }\n      });\n      summer_months.forEach(function (element) {\n        if (date.includes(element)) {\n          new_date = \"Summer\";\n          console.log(new_date);\n        }\n      });\n      winter_months.forEach(function (element) {\n        if (date.includes(element)) {\n          new_date = \"Winter\";\n          console.log(new_date);\n        }\n      });\n      autumn_months.forEach(function (element) {\n        if (date.includes(element)) {\n          new_date = \"Autumn\";\n          console.log(new_date);\n        }\n      });\n      spring_months.forEach(function (element) {\n        if (date.includes(element)) {\n          new_date = \"Spring\";\n          console.log(new_date);\n        }\n      });\n      console.log(new_date);\n      return new_date;\n    }\n  }, {\n    key: \"update_date_format\",\n    value: function update_date_format(date) {\n      var months = [\"january\", \"february\", \"march\", \"april\", \"may\", \"june\", \"july\", \"august\", \"september\", \"october\", \"november\", \"december\"];\n      var new_date = \"\";\n\n      for (var i = 0; i < 12; i++) {\n        if (date.includes(months[i].toLowerCase())) {\n          console.log(months[i]);\n          var day = date.replace(/\\D/g, '');\n          console.log(day);\n\n          if (day) {\n            if (i < 9) {\n              new_date = day + \"-0\" + (i + 1);\n            } else {\n              new_date = day + \"-\" + (i + 1);\n            }\n\n            return new_date;\n          } else {\n            if (i < 9) {\n              new_date = \"01-0\" + (i + 1);\n            } else {\n              new_date = \"01-0\" + (i + 1);\n            }\n\n            return new_date;\n          }\n        }\n      }\n\n      return;\n    }\n  }, {\n    key: \"handleProlog\",\n    value: function handleProlog() {\n      var _this2 = this;\n\n      var txt = \"\";\n\n      switch (this.state.client.Action) {\n        // accomodation(\"Where\", \"Season\", \"Type\", \"Price\").\n        case \"STAY\":\n          txt = 'accomodation(FinalLocation,Date,Type,Price)';\n\n          if (\"Price\" in this.state.client && this.state.client[\"Price\"] !== undefined) {\n            switch (this.state.client[\"Price\"]['Filter']) {\n              case \"+\":\n                txt = txt.replace(\"accomodation\", \"accomodation_price_greater\");\n                txt = txt.replace(\"Price\", '\"' + this.state.client[\"Price\"]['Value'] + '\"');\n                break;\n\n              case \"-\":\n                txt = txt.replace(\"accomodation\", \"accomodation_price_lower\");\n                txt = txt.replace(\"Price\", '\"' + this.state.client[\"Price\"]['Value'] + '\"');\n                break;\n\n              case \"+-\":\n                txt = txt.replace(\"accomodation\", \"accomodation_price_between\");\n                txt = txt.replace(\"Price\", '\"' + this.state.client[\"Price\"][\"Min\"] + '\",\"' + this.state.client[\"Price\"]['Max'] + '\"');\n                break;\n            }\n          }\n\n          [\"FinalLocation\", \"Date\", \"Type\"].forEach(function (element) {\n            if (element in _this2.state.client && _this2.state.client[element] !== undefined) {\n              if (element === \"Date\") {\n                txt = txt.replace(\"Date\", '\"' + _this2.seasonDate(_this2.state.client[element]) + '\"');\n              } else {\n                txt = txt.replace(element, '\"' + _this2.state.client[element] + '\"');\n              }\n            }\n          });\n          console.log(txt);\n          break;\n        // flight(\"From - Country\", \"From - Continent\", \"To - Country\", \"To - Continent\", \"Date\", \"Hour\", \"Class\", \"Price\").\n\n        case \"FLIGHT\":\n          txt = 'flight(InitialLocation,_,FinalLocation,_,Date,Hour,Class,Price)';\n\n          if (\"Price\" in this.state.client && this.state.client[\"Price\"] !== undefined) {\n            switch (this.state.client[\"Price\"]['Filter']) {\n              case \"+\":\n                txt = 'flight_price_greater(InitialLocation,FinalLocation,Date,Hour,Class,\"' + this.state.client[\"Price\"]['Value'] + '\")';\n                break;\n\n              case \"-\":\n                txt = 'flight_price_lower(InitialLocation,FinalLocation,Date,Hour,Class,\"' + this.state.client[\"Price\"]['Value'] + '\")';\n                break;\n\n              case \"+-\":\n                txt = 'flight_price_between(InitialLocation,FinalLocation,Date,Hour,Class,\"' + this.state.client[\"Price\"][\"Min\"] + '\",\"' + this.state.client[\"Price\"]['Max'] + '\")';\n                break;\n            }\n          }\n\n          [\"InitialLocation\", \"Date\", \"FinalLocation\"].forEach(function (element) {\n            if (element in _this2.state.client && _this2.state.client[element] !== undefined) {\n              if (element === \"Date\") {\n                txt = txt.replace(\"Date\", '\"' + _this2.update_date_format(_this2.state.client[element]) + '\"');\n              } else {\n                txt = txt.replace(element, '\"' + _this2.state.client[element] + '\"');\n              }\n            }\n          });\n          console.log(txt);\n          break;\n        // attraction(\"Where\", \"Season\", \"Type\", \"Name\", \"Price\").\n\n        case \"ATTRACTION\":\n          txt = 'get_attractions_given_type(FinalLocation,Date,AttractionSubtype,Type,Name,Price)';\n\n          if (\"Price\" in this.state.client && this.state.client[\"Price\"] !== undefined) {\n            switch (this.state.client[\"Price\"]['Filter']) {\n              case \"+\":\n                txt = 'attraction_price_greater(FinalLocation,Date,AttractionSubtype,Type,Name,\"' + this.state.client[\"Price\"]['Value'] + '\")';\n                break;\n\n              case \"-\":\n                txt = 'attraction_price_lower(FinalLocation,Date,AttractionSubtype,Type,Name,\"' + this.state.client[\"Price\"]['Value'] + '\")';\n                break;\n\n              case \"+-\":\n                txt = 'attraction_price_between((FinalLocation,Date,AttractionSubtype,Type,Name,\"' + this.state.client[\"Price\"][\"Min\"] + '\",\"' + this.state.client[\"Price\"]['Max'] + '\")';\n                break;\n            }\n          }\n\n          [\"FinalLocation\", \"Date\", \"Type\"].forEach(function (element) {\n            if (element in _this2.state.client && _this2.state.client[element] !== undefined) {\n              if (element === \"Date\") {\n                txt = txt.replace(\"Date\", '\"' + _this2.seasonDate(_this2.state.client[element]) + '\"');\n              } else {\n                txt = txt.replace(element, '\"' + _this2.state.client[element] + '\"');\n              }\n            }\n          });\n          console.log(txt);\n          break;\n\n        default:\n          break;\n      }\n\n      this.callProlog(txt);\n      return txt;\n    }\n  }]);\n\n  return ClientAnalysis;\n}();\n\nexport default ClientAnalysis;","map":{"version":3,"names":["nlp","ConversationProvider","ClientAnalysis","analyze_question","input","doc","contractions","expand","compute","changed","client","state","console","log","out","has","push","match","canBe","text","cp","getQuestion","fuzzy","undefined","splice","cityInit","cities","split","data","values","parseInt","forEach","element","Answer","length","txt","includes","handleProlog","dljs","extend","tags","Season","isA","words","summer","winter","spring","autumn","fall","no","nope","city","nature","historical","fun","trim","fetch","then","response","json","ok","error","message","statusText","Promise","reject","catch","date","seasons","winter_months","spring_months","summer_months","autumn_months","new_date","toLowerCase","months","i","day","replace","Action","seasonDate","update_date_format","callProlog"],"sources":["/home/bearkiller/dev/IntelligentSystems/mini-project/react_website/src/ComponentAnalysis.js"],"sourcesContent":["// npm init -y\n//npm i compromise\nimport nlp from 'compromise'\nimport ConversationProvider from './AnswerProvider'\n\nclass ClientAnalysis {\n    \n    constructor(){  \n        this.dljs = \n        this.cp = new ConversationProvider()\n        this.state = {\n            client : {\n                \"Destination\":-1,\n                \"Answer\" : [],\n                \"!Action\":[],\n                \"ToAnswer\":false\n            }\n        }\n\n        nlp.extend({\n            // add new tags\n            tags: {\n            Season: {\n                isA: 'Date',\n            },\n           \n            },\n            // add or change words in the lexicon\n            words: {\n                summer: 'Season',\n                winter: 'Season',\n                spring: 'Season',\n                autumn: 'Season',\n                fall: 'Season',\n                no:     'Negative',\n                nope:     'Negative',\n                city:   ['City', \"AttType\"],\n                nature: ['Nature', 'AttType'],\n                historical: ['AttType','Historical'],\n                fun:    ['AttType','Fun'],\n            },\n        })\n    }\n   \n    callProlog(input){\n        //attraction_type(X,Y)\n        input = input.trim();\n    \n        if (!input)\n          return;\n\n        fetch('http://localhost:3009/api?query='+input)\n        .then(async response => {\n            const data = await response.json();\n    \n            // check for error response\n            if (!response.ok) {\n                // get error message from body or default to response statusText\n                const error = (data && data.message) || response.statusText;\n                return Promise.reject(error);\n            }\n            console.log(data)\n    \n            //attraction_type(A,B)\n            \n            \n        })\n        .catch(error => {\n            console.error('There was an error!', error);\n        });\n      }\n\n      seasonDate(date){\n        var seasons = [\"summer\", \"winter\", \"autumn\", \"spring\"]\n        var winter_months = [\"january\", \"february\", \"march\"]\n        var spring_months = [\"april\", \"may\", \"june\"]\n        var summer_months = [\"july\", \"august\", \"september\"]\n        var autumn_months = [\"october\", \"november\", \"december\"]\n\n        var new_date = date.toLowerCase();\n        date = date.toLowerCase();\n\n        if(date.includes(\"fall\")){\n            new_date = \"Autumn\";\n        }\n        if (seasons.includes(new_date.toLowerCase()))\n            return new_date;\n\n        seasons.forEach(element =>{\n            if(date.includes(element.toLowerCase())){\n                new_date = element;\n                console.log(new_date);\n            }\n        })\n\n        summer_months.forEach(element =>{\n            if(date.includes(element)){\n                new_date = \"Summer\";\n                console.log(new_date);                \n            }\n        })\n        winter_months.forEach(element =>{\n            if(date.includes(element)){\n                new_date = \"Winter\";\n                console.log(new_date);                \n            }\n        })\n        autumn_months.forEach(element =>{\n            if(date.includes(element)){\n                new_date = \"Autumn\";  \n                console.log(new_date);      \n            }\n        })\n        spring_months.forEach(element =>{\n            if(date.includes(element)){\n                new_date = \"Spring\";        \n                console.log(new_date);\n            }\n        })\n        console.log(new_date)\n        return new_date;\n    }\n    \n    update_date_format(date){\n        var months = [\"january\", \"february\", \"march\", \"april\", \"may\", \"june\", \"july\", \"august\", \"september\", \"october\", \"november\", \"december\"]\n\n        var new_date = \"\";\n        for(var i = 0; i<12; i++){\n            if(date.includes(months[i].toLowerCase())){\n                console.log(months[i])\n                var day = date.replace(/\\D/g, '');\n                console.log(day)\n                if (day){\n                    if(i<9){\n                        new_date = day + \"-0\" + (i+1);    \n                    }else{\n                        new_date = day + \"-\" + (i+1);\n                    }\n                    return new_date;\n                }else{\n                    if(i<9){\n                        new_date = \"01-0\" + (i+1);    \n                    }else{\n                        new_date = \"01-0\" + (i+1);\n                    }\n                    return new_date;\n                }\n            }\n        }\n        return;\n    }\n\n\n\n\n    handleProlog(){\n        var txt = \"\";\n        \n        switch(this.state.client.Action){\n            // accomodation(\"Where\", \"Season\", \"Type\", \"Price\").\n            case \"STAY\":\n                txt = 'accomodation(FinalLocation,Date,Type,Price)';\n                if (\"Price\" in this.state.client && this.state.client[\"Price\"]!==undefined){\n                    switch(this.state.client[\"Price\"]['Filter']){\n                        case \"+\":\n                            txt=txt.replace(\"accomodation\", \"accomodation_price_greater\");\n                            txt = txt.replace(\"Price\", '\"'+this.state.client[\"Price\"]['Value']+'\"');\n                            break;\n                        case \"-\":\n                            txt=txt.replace(\"accomodation\", \"accomodation_price_lower\");\n                            txt = txt.replace(\"Price\", '\"'+this.state.client[\"Price\"]['Value']+'\"');\n                            break;\n                        case \"+-\":\n                            txt = txt.replace(\"accomodation\", \"accomodation_price_between\");\n                            txt = txt.replace(\"Price\", '\"'+this.state.client[\"Price\"][\"Min\"]+'\",\"'+this.state.client[\"Price\"]['Max']+'\"');\n                            break;\n                    }\n                }\n\n                [\"FinalLocation\", \"Date\", \"Type\"].forEach(element=>{\n                    if(element in this.state.client && this.state.client[element]!==undefined){\n                        if (element === \"Date\"){\n                            txt = txt.replace(\"Date\", '\"'+this.seasonDate(this.state.client[element])+'\"')\n                        }else{\n                            txt = txt.replace(element, '\"'+this.state.client[element]+'\"');\n                        }\n                    }\n                })\n                console.log(txt)\n                break;\n               \n            // flight(\"From - Country\", \"From - Continent\", \"To - Country\", \"To - Continent\", \"Date\", \"Hour\", \"Class\", \"Price\").\n            case \"FLIGHT\":\n                txt = 'flight(InitialLocation,_,FinalLocation,_,Date,Hour,Class,Price)';\n                if (\"Price\" in this.state.client && this.state.client[\"Price\"]!==undefined){\n                    switch(this.state.client[\"Price\"]['Filter']){\n                        case \"+\":\n                            txt='flight_price_greater(InitialLocation,FinalLocation,Date,Hour,Class,\"'+this.state.client[\"Price\"]['Value']+'\")';\n                     \n                            break;\n                        case \"-\":\n                            txt='flight_price_lower(InitialLocation,FinalLocation,Date,Hour,Class,\"'+this.state.client[\"Price\"]['Value']+'\")';\n                            break;\n                        case \"+-\":\n                            txt = 'flight_price_between(InitialLocation,FinalLocation,Date,Hour,Class,\"'+this.state.client[\"Price\"][\"Min\"]+'\",\"'+ this.state.client[\"Price\"]['Max']+'\")';\n                         \n                            break;\n                    }\n                }\n\n                [\"InitialLocation\", \"Date\", \"FinalLocation\"].forEach(element=>{\n                    if(element in this.state.client && this.state.client[element]!==undefined){\n                        if (element === \"Date\"){\n                            txt = txt.replace(\"Date\", '\"'+this.update_date_format(this.state.client[element])+'\"')\n                        }else{\n                            txt = txt.replace(element, '\"'+this.state.client[element]+'\"');\n                        }\n                    }\n                });\n                console.log(txt)\n                break;\n\n\n           \n            // attraction(\"Where\", \"Season\", \"Type\", \"Name\", \"Price\").\n            case \"ATTRACTION\":\n                txt = 'get_attractions_given_type(FinalLocation,Date,AttractionSubtype,Type,Name,Price)';\n                if (\"Price\" in this.state.client && this.state.client[\"Price\"]!==undefined){\n                    switch(this.state.client[\"Price\"]['Filter']){\n                        case \"+\":\n                            txt='attraction_price_greater(FinalLocation,Date,AttractionSubtype,Type,Name,\"'+this.state.client[\"Price\"]['Value']+'\")';\n                     \n                            break;\n                        case \"-\":\n                            txt='attraction_price_lower(FinalLocation,Date,AttractionSubtype,Type,Name,\"'+this.state.client[\"Price\"]['Value']+'\")';\n                            break;\n                        case \"+-\":\n                            txt = 'attraction_price_between((FinalLocation,Date,AttractionSubtype,Type,Name,\"'+this.state.client[\"Price\"][\"Min\"]+'\",\"'+ this.state.client[\"Price\"]['Max']+'\")';\n                            break;\n                    }\n                }\n\n                [\"FinalLocation\", \"Date\", \"Type\"].forEach(element=>{\n                    if(element in this.state.client && this.state.client[element]!==undefined){\n                        if (element === \"Date\"){\n                            txt = txt.replace(\"Date\", '\"'+this.seasonDate(this.state.client[element])+'\"')\n                        }else{\n                            txt = txt.replace(element, '\"'+this.state.client[element]+'\"');\n                        }\n                    }\n                });\n                console.log(txt)  \n                break;\n            default:\n                break;\n        }\n        this.callProlog(txt)\n        return txt;\n    };\n   \n      \n    analyze_question=(input)=> {\n        let doc = nlp(input)\n        doc.contractions().expand()\n        doc.compute('root')\n        // Clear Answers\n        var changed = false;\n        var client = this.state.client;\n        client['Answer']= []\n        client['!Action']= []\n\n        console.log(doc.out('tags'))\n\n\n        if (doc.has(\"~(hello|hi|howdy|hey)~ *\")){\n            client['!Action'].push(\"GREETING\")\n            changed = true\n        }\n        //Goodbye\n        if (doc.has(\"(goodbye|bye|see you later|until next time|farewell)\")){\n            client['!Action'].push(\"FAREWELL\")\n            changed = true\n        }\n\n        if (doc.has(\"~(#Possessive|#Pronoun)~ * #Copula #Person\") || doc.has(\"#Pronoun #Person\" )){\n            client['ClientName'] = doc.match(\"#Person\").canBe(\"Person\").text()\n            client['Answer'].push(this.cp.getQuestion('Greeting')+\" \"+client['ClientName'])\n            changed = true\n        }\n\n\n        //Question\n        if (doc.has(\"#QuestionWord\")){\n            client['ToAnswer']=true;\n            \n            if (doc.has(\"~(mean)~\", null, {fuzzy:0.5})){\n                switch(client['LQ']){\n                    case \"FinalLocation\":\n                        client['Answer'].push(this.cp.getQuestion('ClarifyDestination'))\n                        break;\n                    case \"Action\":\n                        client['Answer'].push(this.cp.getQuestion('ClarifyAction'))\n                        break;\n                    case \"Date\":\n                        client['Answer'].push(this.cp.getQuestion('ClarifyDate'))\n                        break;\n                    case \"Type\":\n                        client['Answer'].push(this.cp.getQuestion('ClarifyType'))\n                        break;\n                    default:\n                        client['!Action'].push(\"INTRODUCE\")\n                        break;\n                }\n    \n            }else if (doc.has(\"~(you)~\")){\n                client['!Action'].push(\"INTRODUCE\")\n            }else{\n                client['!Action'].push(\"QUESTION\")\n            }\n            changed = true\n        }\n        if (doc.has(\"~(start over|restart|reset)~\", null, {fuzzy:0.6})){\n            client['Answer'].push(this.cp.getQuestion('Reset'))\n            this.state = {\n                client : {\n                    \"Destination\":-1,\n                    \"Answer\" : client[\"Answer\"],\n                    \"ClientName\" : client[\"ClientName\"],\n                    \"!Action\":[],\n                    \"ToAnswer\":false\n    \n                }\n            }\n            changed = true\n        }\n\n        //Negative Answers\n        if ('LQ' in client && client['LQ']!==undefined){\n            console.log(client['LQ'])\n            switch(client['LQ']){\n                case \"FinalLocation\":\n                    if(doc.has(\"#City\")){\n                        client['LQ']=undefined\n                        client[\"FinalLocation\"] = doc.match(\"#City\").canBe(\"Place\").text()\n                        client['Destination']=1\n                    }\n                    if(doc.has(\"#Negative\")){\n                        client['LQ']=undefined\n                        client[\"FinalLocation\"] = undefined\n                        client['Destination']=0\n                    }\n                    break;\n                case \"Date\":\n                    if(doc.has(\"#Negative\")){\n                        client['LQ']=undefined\n                        client[\"Date\"] = undefined\n                    }\n                    break;\n                case \"Price\":\n                    if(doc.has(\"#Negative\")){\n                        client['LQ']=undefined\n                        client[\"Price\"] = undefined\n                    }else if (doc.has(\"#NumericValue\")){\n                        client[\"Price\"] = {\n                            \"Value\":doc.match(\"#NumericValue\").canBe(\"NumericValue\").text(),\n                            \"Filter\":\"-\"\n                        }\n                    }\n                    break;\n                case \"Action\":\n                    if(doc.has(\"#Negative\")){\n                        client['LQ']=undefined\n                        client[\"Action\"] = undefined\n                    }\n                    break;\n                case \"Type\":\n                    if(doc.has(\"#Negative\")){\n                        client['LQ']=undefined\n                        client[\"Type\"] = undefined\n                    }\n                    break;\n                case \"ClientName\":\n                    if(doc.has(\"#Negative\")){\n                        client['LQ']=undefined\n                        client[\"ClientName\"] = undefined\n                    }else if(doc.has(\"#Person\")){\n\n                        client['ClientName'] = doc.match(\"#Person\").canBe(\"Person\").text()\n                        client['LQ']=undefined\n                    }\n                    break;\n                default:\n                    break;\n            }\n            if (client['LQ']===undefined){\n                client['Answer'].push(this.cp.getQuestion('Confirmation'))\n                changed = true\n            }\n               \n        }\n\n        //Questions Like:\n        // Do you have a destination\n        // 0-No, 1-Yes, -1- Not Answered\n\n            // What do You Wanna Do (STAY|FLIGHT|ATTRACTION)\n            if (doc.has(\"~(flights|fly|airplane|takeoff)~\", null, {fuzzy:0.6})){\n                client['Action'] = \"FLIGHT\"\n                if (client['LQ']===\"Action\") client['LQ']=undefined;\n                changed = true\n\n            }else if (doc.has(\"~(stay|accomodation|hotel|room|motel)~\", null, {fuzzy:0.6})){\n                client['Action'] = \"STAY\"\n                if (client['LQ']===\"Action\") client['LQ']=undefined;\n                changed = true\n\n            }else if (doc.has(\"~(attractions|events)~\", null, {fuzzy:0.6})){\n                client['Action'] = \"ATTRACTION\"\n                if (client['LQ']===\"Action\") client['LQ']=undefined;\n                changed = true\n            }\n            if (doc.has(\"#Place\") && !doc.has(\"#City\")){\n                client['Answer'].splice(0,0,\"Help me out! If you have a destination give me the city\");\n            }\n            //PLACES\n            //Field: FinalLocation || InitialLocation for flights\n            if (doc.has(\"(starting in|from) #City\")){\n                var cityInit =  doc.match(\"(starting in|from) #City\").canBe(\"Place\").text()\n                client['InitialLocation'] = cityInit\n                if (client['LQ']===\"InitialLocation\") client['LQ']=undefined;\n                changed = true\n            }\n            if (doc.has(\"(in|to|visit|know) #City\"))\n            {\t// STAY|ATTRACTION : Visiting City\n                var cities =  doc.match(\"(in|to|visit) #City\").canBe(\"Place\").text().split(\" \")\n                client['FinalLocation'] = cities[0]\n                client[\"Destination\"] = 1\n                if (client['LQ']===\"FinalLocation\") client['LQ']=undefined;\n                changed = true\n            }\n        \n            if(doc.has(\"#Negative * (destination|city)\") || doc.has(\"(somewhere|anywhere)\"))\n            {\t//No Destination / Go Somewhere\n                client[\"Destination\"] = 0\n                if (client['LQ']===\"FinalLocation\") client['LQ']=undefined;\n                changed = true\n            }\n\n            //DATES\n            if (doc.has(\"#Date\")){\n                var data =  doc.match(\"#Date\").canBe(\"Date\").text();\n                changed = true;\n                client['Date'] = data;\n                if (client['LQ']===\"Date\")\n                    client['LQ']=undefined;\n            }\n        \n            //PRICE\n            if (doc.has(\"(under|below|up to|until|at most) #Money\")){\n                client[\"Price\"] = {\n                    \"Value\":doc.match(\"#Money\").canBe(\"Money\").text(),\n                    \"Filter\":\"-\"\n                }\n                if (client['LQ']===\"Price\") client['LQ']=undefined;\n                changed = true\n            }\n            else if((doc.has(\"(above|at least) #Money\"))){\n                client[\"Price\"] = {\n                    \"Value\":doc.match(\"#Money\").canBe(\"Money\").text(),\n                    \"Filter\":\"+\"\n                }\n                if (client['LQ']===\"Price\") client['LQ']=undefined;\n                changed = true\n\n\n            }else if(doc.has(\"(between) #NumericValue * #NumericValue\"))\n            {\n                var values = doc.match(\"#Money\").canBe(\"Money\").text().split(\" \")\n                client[\"Price\"] = {\n                    \"Filter\":\"+-\"\n                }\n                if (parseInt(values[0],10)<parseInt(values[1],10)) {\n                    client['Price']['Min'] = values[0];\n                    client['Price']['Max'] = values[1]\n                }else{\n                    client['Price']['Min'] = values[1];\n                    client['Price']['Max'] = values[0]\n                }\n                if (client['LQ']===\"Price\") client['LQ']=undefined;\n                changed = true\n            }\n\n            //Type\n            if (doc.has(\"~(fun|nature|city|historic)~\", null, {fuzzy:0.6})){\n                if (doc.has(\"~fun~\", null, {fuzzy:0.6})){\n                   client['Type'] = \"Fun\"\n\n                }else if(doc.has(\"~City~\", null, {fuzzy:0.6})){\n                    client['Type'] = \"City\"\n\n                 }else if(doc.has(\"~nature~\", null, {fuzzy:0.6})){\n                    client['Type'] = \"Nature\"\n\n                 }else if(doc.has(\"~historic~\", null, {fuzzy:0.6})){\n                    client['Type'] = \"Historical\"\n\n                 }\n                if (client['LQ']===\"Type\") client['LQ']=undefined;\n\n                changed = true\n            }\n\n            client[\"!Action\"].forEach(element=>{\n                if (element === \"GREETING\"){\n                    client['Answer'].push(this.cp.getQuestion('Greeting'))\n                }else if (element === \"FAREWELL\"){\n                    client['Answer'].push(this.cp.getQuestion('Farewell'))\n                }else if (element === \"INTRODUCE\"){\n                    client['Answer'].push(this.cp.getQuestion('Introduction'))\n                }\n            })\n \n    if (!('ClientName' in client) ){\n        client['Answer'].push(this.cp.getQuestion('ClientName'))\n        client['LQ']=\"ClientName\"\n        \n    }else if ((!('FinalLocation' in client) && client['Destination']===-1 ) || client['LQ']===\"FinalLocation\" ){\n        client['Answer'].push(this.cp.getQuestion('FinalLocation'))\n        client['LQ']=\"FinalLocation\"\n\n    }else if((!('Date' in client) && !(\"Season\" in client)) || client['LQ']===\"Date\" ){\n        client['Answer'].push(\"When are you planning to go?\")\n        client['LQ']=\"Date\"\n\n    }else if(!('Price' in client)  || client['LQ']===\"Price\" ){\n        client['Answer'].push(\"Do you have any price range restrictions?\")\n        client['LQ']=\"Price\"\n\n    }else if(!('Action' in client) || client['LQ']===\"Action\" ){\n        client['Answer'].push(\"What are you planning to do?\")\n        client['LQ']=\"Action\"\n    }\n    else if(client['Action'] === 'ATTRACTION' || client['LQ']===\"Type\" ){\n        client['Answer'].push(\"What kind of attraction are you looking for? Fun, Nature, historical or City?\")\n        client['LQ']=\"Type\"\n    }\n    if (changed === false){\n        client['Answer'].splice(0,0,this.cp.getQuestion('Unsupported'));\n    \n    }\n\n    //Order\n    // Add function to provide data based on filter\n    if (doc.has(\"~(show|find|see|give|tell)~\") || client.Answer.length===0){\n        client['ToAnswer']=true;\n\n        var txt;\n        if (client['Action']===\"FLIGHT\"){\n            if('Date' in client && client['Date']!== undefined && [\"summer\", \"winter\", \"autumn\", \"spring\", \"fall\"].includes(client['Date'])){\n                client['Answer'].push(\"In what date are you planning to go (day of month)?\")\n                client['LQ']=\"Date\"\n            }else{\n                txt = this.handleProlog();\n            }\n        }else{\n            txt = this.handleProlog();\n        }\n        client['Answer'].splice(0,0,\"Don't worry, we're processing your request!\");\n    \n        console.log(txt)\n        // \n        //this.callProlog(txt);\n    }\n  \n    return client\n    \n    }\n}\n\nexport default ClientAnalysis\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}