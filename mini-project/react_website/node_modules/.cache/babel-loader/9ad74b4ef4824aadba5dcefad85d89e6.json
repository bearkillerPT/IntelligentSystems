{"ast":null,"code":"var keep = {\n  tags: true\n};\n\nvar hasPlural = function hasPlural(parsed) {\n  var root = parsed.root;\n\n  if (root.has('^(#Uncountable|#Possessive|#ProperNoun|#Place|#Pronoun)+$')) {\n    return false;\n  }\n\n  return true;\n};\n\nvar toPlural = function toPlural(m, parsed) {\n  // already plural?\n  if (parsed.isPlural === true) {\n    return m;\n  } // is a plural appropriate?\n\n\n  if (!hasPlural(parsed)) {\n    return m;\n  }\n\n  var _m$world = m.world,\n      methods = _m$world.methods,\n      model = _m$world.model;\n  var nounToPlural = methods.two.transform.nounToPlural; // inflect the root noun\n\n  var str = parsed.root.text('normal');\n  var plural = nounToPlural(str, model);\n  m.match(parsed.root).replaceWith(plural, keep).tag('Plural', 'toPlural'); // should we change the determiner/article?\n\n  if (parsed.determiner.has('(a|an)')) {\n    // 'a captain' -> 'the captains'\n    m.replace(parsed.determiner, 'the', keep);\n  }\n\n  return m;\n};\n\nexport default toPlural;","map":null,"metadata":{},"sourceType":"module"}