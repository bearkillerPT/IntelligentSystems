{"ast":null,"code":"import toString from '../../_toString.js';\nimport { sequence, ones_mapping, tens_mapping } from './data.js';\n/**\n * turns an integer/float into.ber, like 'fifty-five'\n */\n//turn number into an array of magnitudes, like [[5, million], [2, hundred]]\n\nvar breakdown_magnitudes = function breakdown_magnitudes(num) {\n  var working = num;\n  var have = [];\n  sequence.forEach(function (a) {\n    if (num >= a[0]) {\n      var howmany = Math.floor(working / a[0]);\n      working -= howmany * a[0];\n\n      if (howmany) {\n        have.push({\n          unit: a[1],\n          count: howmany\n        });\n      }\n    }\n  });\n  return have;\n}; //turn numbers from 100-0 into their text\n\n\nvar breakdown_hundred = function breakdown_hundred(num) {\n  var arr = [];\n\n  if (num > 100) {\n    return arr; //something bad happened..\n  }\n\n  for (var i = 0; i < tens_mapping.length; i++) {\n    if (num >= tens_mapping[i][1]) {\n      num -= tens_mapping[i][1];\n      arr.push(tens_mapping[i][0]);\n    }\n  } //(hopefully) we should only have 20-0 now\n\n\n  if (ones_mapping[num]) {\n    arr.push(ones_mapping[num]);\n  }\n\n  return arr;\n};\n/** print-out 'point eight nine'*/\n\n\nvar handle_decimal = function handle_decimal(num) {\n  var names = ['zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine'];\n  var arr = []; //parse it out like a string, because js math is such shit\n\n  var str = toString(num);\n  var decimal = str.match(/\\.([0-9]+)/);\n\n  if (!decimal || !decimal[0]) {\n    return arr;\n  }\n\n  arr.push('point');\n  var decimals = decimal[0].split('');\n\n  for (var i = 0; i < decimals.length; i++) {\n    arr.push(names[decimals[i]]);\n  }\n\n  return arr;\n};\n/** turns an integer into a textual number */\n\n\nvar toText = function toText(obj) {\n  var num = obj.num; // handle zero, quickly\n\n  if (num === 0 || num === '0') {\n    return 'zero'; // no?\n  } //big numbers, north of sextillion, aren't gonna work well..\n  //keep them small..\n\n\n  if (num > 1e21) {\n    num = toString(num);\n  }\n\n  var arr = []; //handle negative numbers\n\n  if (num < 0) {\n    arr.push('minus');\n    num = Math.abs(num);\n  } //break-down into units, counts\n\n\n  var units = breakdown_magnitudes(num); //build-up the string from its components\n\n  for (var i = 0; i < units.length; i++) {\n    var unit_name = units[i].unit;\n\n    if (unit_name === 'one') {\n      unit_name = ''; //put an 'and' in here\n\n      if (arr.length > 1) {\n        arr.push('and');\n      }\n    }\n\n    arr = arr.concat(breakdown_hundred(units[i].count));\n    arr.push(unit_name);\n  } //also support decimals - 'point eight'\n\n\n  arr = arr.concat(handle_decimal(num)); //remove empties\n\n  arr = arr.filter(function (s) {\n    return s;\n  });\n\n  if (arr.length === 0) {\n    arr[0] = '';\n  }\n\n  return arr.join(' ');\n};\n\nexport default toText; // console.log(to_text(-1000.8));","map":null,"metadata":{},"sourceType":"module"}